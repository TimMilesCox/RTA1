MASMX 7r3A Build 12
3/vast.msm
*EOF*
  :                            11 	$list
  :                            12 
  :                            13 $(1:01000/$1)
  :                            14 
01:001000  0000BF              +15 device_index	128+63
  :                            16 
  :                            17 $(3:03000/$3)
  :                            18 patterns
  :                            21 	$list
  :                            22 
03:003040  00003F              +23 device	63
03:003041  000001              +24 devices	1
03:003042  000008              +25 banks	8
  :                            26 
  :                            27 text	$res	48//3
  :                            28 
  :                            29 __BASE	$equ	__VASTP
  :                            30 
  :                            31 $(0:0/$0)
  :                            32 	
[+0001]18
[+0000]18*/30
00:000040  000050 000000 001000 000000
                              +33 	catalog
00:000044  4D0003              +33 
00:000045  000000              +33 
[+0002]30
00:000046  000000 000000        +33 
[+0000]18
[+0001]18*/48
00:000048  800040 000007 001000 FFFFFF 000000 000000 000050 000000
                              +33 
  :                            34  
00:000050  60207F              +35 	$base_d	$zenith(3)-03000	1024
00:000051  340003              +35 
00:000052  600100              +35 
00:000053  75007A              +35 
00:000054  654000              +35 
00:000055  20000E              +35 
00:000056  9F0101              +36 	c	(seg$load)	0,,xi	(vastd:L),,long
00:000057  FD0000              +36 
00:000058  FCF003              +36 
00:000059  FF0103              +36 
00:00005A  38000F              +36 
  :                            37 
00:00005B  601000              +38 request	la	device_index
00:00005C  A5003F              +39 	and	63,,xi		. strip device port numbers bias
00:00005D  203040              +40 	sa	device
  :                            41 
00:00005E  F83040              +42 	printf	$3("devices[%d] banks[%d] device[%d]>":0),,xi	devices	banks device
00:00005F  F83042              +42 
00:000060  F83041              +42 
00:000061  FD3053              +42 
00:000062  FD0001              +42 
00:000063  FCF005              +42 
00:000064  FF0104              +42 
00:000065  38000F              +42 
00:000066  FD0001              +43 	fflush	stdout
00:000067  FCF001              +43 
00:000068  FF0105              +43 
00:000069  38000F              +43 
  :                            44 
00:00006A  FD0030              +45 	fgets	text,,xi	48,,xi	stdin
00:00006B  FD3043              +45 
00:00006C  FD0000              +45 
00:00006D  FCF003              +45 
00:00006E  FF0106              +45 
00:00006F  38000F              +45 
00:000070  160018              +45 
00:000071  1D0018              +45 
00:000072  EE0075              +45 
00:000073  CE0075              +45 
00:000074  653043              +45 
00:000075  613043              +46 	la	text,,t1
00:000076  C5FFD2              +47 	aa	-'.',,xi
00:000077  C600B4              +48 	jza	no_request
  :                            49 
00:000078  FD3040              +50 	sscanf	text,,xi	$3("%d %d %d":0),,xi	devices,,xi	banks,,xi	device,,xi
00:000079  FD3042              +50 
00:00007A  FD3041              +50 
00:00007B  FD305F              +50 
00:00007C  FD3043              +50 
00:00007D  FCF005              +50 
00:00007E  FF0107              +50 
00:00007F  38000F              +50 
  :                            51 
00:000080  603040              +52 	la	device
00:000081  950080              +53 	or	128,,xi		. add device port numbers bias
00:000082  201000              +54 	sa	device_index
  :                            55 
00:000083  8F0108              +56 	SIMD_CONTROL	(-1, 4, 16-1, 4q)
00:000084  870014              +56 
  :                            57 
  :                            58 next_device
00:000085  783041              +59 	tp	devices
00:000086  B6005B              +60 	j	request
  :                            61 
00:000087  049000              +62 	inA	*device_index
00:000088  48010C              +63 	lk	(0c00000s)
00:000089  AF010D              +64 	mta	(0800000s)
00:00008A  B6009D              +65 	j	not_sysmem
  :                            66 
00:00008B  A0010E              +67 	and	(03FFFFF)
00:00008C  C50001              +68 	aa	1,,xi
00:00008D  060006              +69 	sar	6
  :                            70 
00:00008E  703042              +71 	tz	banks
00:00008F  783042              +72 	tp	banks
00:000090  B60094              +73 	j	automatic
  :                            74 
00:000091  680004              +75 	anu	banks
00:000092  D83042              +75 
00:000093  7E00A7              +76 	jc	proceed
  :                            77 
  :                            78 automatic
00:000094  203042              +79 	sa	banks
  :                            80 
00:000095  F80004              +81 	printf	$3("device %d has %x memory banks":10:0),,xi	device	a
00:000096  F83040              +81 
00:000097  FD3062              +81 
00:000098  FD0001              +81 
00:000099  FCF004              +81 
00:00009A  FF0104              +81 
00:00009B  38000F              +81 
00:00009C  B600A7              +82 	j	proceed
  :                            83 
  :                            84 not_sysmem
00:00009D  501000              +85 	lx	device_index
00:00009E  85FF80              +86 	ax	-128,,xi
  :                            87 
                                	printf	$3("device %d type %x is not a system memory type":10:0),,xi	;
00:00009F  F80004              +89 		device	a
00:0000A0  F83040              +89 
00:0000A1  FD306D              +89 
00:0000A2  FD0001              +89 
00:0000A3  FCF004              +89 
00:0000A4  FF0104              +89 
00:0000A5  38000F              +89 
  :                            90 						
00:0000A6  B6005B              +91 	j	request
  :                            92 
00:0000A7  601000              +93 proceed	la	device_index
00:0000A8  A5003F              +94 	and	63,,xi
00:0000A9  90010F              +95 	or	(0400000)
  :                            96 
00:0000AA  F83042              +97 	lc	imprint	a	banks	
00:0000AB  F80004              +97 
00:0000AC  FCF002              +97 
00:0000AD  3E00B5              +97 
00:0000AE  38000F              +97 
  :                            98 
00:0000AF  1F1000              +99 	dec	device_index
00:0000B0  1F3041              +100 	dec	devices
  :                            101 
00:0000B1  703041              +102 	tz	devices
00:0000B2  B60085              +103 	j	next_device
  :                            104 
00:0000B3  B6005B              +105 	j	request
  :                            106 
  :                            107 no_request
00:0000B4  3D0000              +108 	fret	0
  :                            109 
                                imprint	$head_near	 params(bdescriptor,	int		;
                                				outcount,	int	)	;
                                								;
00:0000B5  8F303C              +113 			scalars(data,		64,	patterns)
00:0000B6  8F3038              +113 
00:0000B7  8F3034              +113 
00:0000B8  8F3030              +113 
00:0000B9  8F302C              +113 
00:0000BA  8F3028              +113 
00:0000BB  8F3024              +113 
00:0000BC  8F3020              +113 
00:0000BD  8F301C              +113 
00:0000BE  8F3018              +113 
00:0000BF  8F3014              +113 
00:0000C0  8F3010              +113 
00:0000C1  8F300C              +113 
00:0000C2  8F3008              +113 
00:0000C3  8F3004              +113 
00:0000C4  8F3000              +113 
  :                            114 
00:0000C5  60F042              +115 	la	bdescriptor
  :                            116 
  :                            117 next_bank
00:0000C6  34001F              +118 	sabr	31
00:0000C7  C50040              +119 	aa	64,,xi
  :                            120 
00:0000C8  500110              +121 	lx	(31*/18)
  :                            122 
00:0000C9  450FFF              +123 	lr	262144/64-1,,xi
  :                            124 
  :                            125 next_row
00:0000CA  740111              +126 	rex	(qs	0, x)
00:0000CB  740114              +127 	rex	(da	(64, 64d))
  :                            128 
00:0000CC  FCF002              +129 	SIMD_TARGET	data+2	16-1
00:0000CD  38000D              +129 
00:0000CE  FD000F              +129 
00:0000CF  380014              +129 
00:0000D0  740114              +130 	rex	(da     (64, 64d))
  :                            131 
00:0000D1  1E00CA              +132 	jdr	next_row
  :                            133 
00:0000D2  1FF043              +134 	dec	outcount
00:0000D3  70F043              +135 	tz	outcount
00:0000D4  B600C6              +136 	j	next_bank
  :                            137 
00:0000D5  873000              +138 ?	$do	16, qpop	patterns+?*4-4
00:0000D6  873004              +138 
00:0000D7  873008              +138 
00:0000D8  87300C              +138 
00:0000D9  873010              +138 
00:0000DA  873014              +138 
00:0000DB  873018              +138 
00:0000DC  87301C              +138 
00:0000DD  873020              +138 
00:0000DE  873024              +138 
00:0000DF  873028              +138 
00:0000E0  87302C              +138 
00:0000E1  873030              +138 
00:0000E2  873034              +138 
00:0000E3  873038              +138 
00:0000E4  87303C              +138 
  :                            139 
00:0000E5  350000              +140 	lret	0
  :                            141 
  :                            142 	$do	$<256,$(0:256)
*EOF*
00:000100+[0001]18:000000
00:000101+[0003]30:000000000000
00:000103+0001CD
00:000104+0001DB
00:000105+0001D6
00:000106+0001E4
00:000107+0001D8
00:000108+FFFFFF00000400000F000004
00:00010c+C00000
00:00010d+800000
00:00010e+3FFFFF
00:00010f+400000
00:000110+7C0000
00:000111+47A000
00:000112+000040000040
00:000114+D70112
03:003053+646576696365735B25645D2062616E6B735B25645D206465
766963655B25645D3E002020
03:00305f+256420256420256400
03:003062+64657669636520256420686173202578206D656D6F727920
62616E6B730A002020
03:00306d+6465766963652025642074797065202578206973206E6F74
20612073797374656D206D656D6F727920747970650A0020
:$(00):000000:000115 :$(01):001000:001001 :$(02):002000:003000 :$(03):003000:00307D 
vast.msm: object code 2904 bytes: 0 errors: 4 undefined labels
